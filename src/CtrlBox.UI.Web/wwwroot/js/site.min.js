function handleAjaxNotificationModal(n,t){if(t.responseJSON.HasNotification){var i=t.responseJSON.notificationsJSON,r="/"+n+"/GetPartialViewNotifications";$.ajax({url:r,type:"POST",cache:!1,"async":!0,dataType:"html",data:{notifications:i}}).done(function(n){$("#div1").html(n)}).fail(function(n){console.log("error : "+n.status+" - "+n.statusText+" - "+n.responseText)})}}function handleAjaxError(n,t,i){var r=n.responseJSON,f,u,e;return r!==undefined||r!==null?(f="",f="<p>"+r.errorCode+"<\/p>",f+="<p>"+r.InnerEx+"<\/p>",f+="<p>"+r.stackTrace+"<\/p>",$(".accordion-inner").html(f),$("#titleError").text(r.errorMessage),$("#modalError").modal(),!1):(u="",n.jqXHR!=undefined?u=n.jqXHR.responseText:(u=n.responseText,u!==""&&(e=$($.parseHTML(u)).filter("div.titleerror"),console.log(e.text()),$(".accordion-inner").html(u),$("#titleError").text(e.text()),$("#modalError").modal()),t==="timeout"||t=="error"&&($(".accordion-inner").html(n.status),$("#titleError").text(i),$("#modalError").modal())),!1)}Number.prototype.formatMoney=function(n,t,i,r){n=isNaN(n=Math.abs(n))?2:n;t=t!==undefined?t:"R$ ";i=i||".";r=r||",";var f=this,o=f<0?"-":"",e=parseInt(f=Math.abs(+f||0).toFixed(n),10)+"",u=(u=e.length)>3?u%3:0;return t+o+(u?e.substr(0,u)+i:"")+e.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+i)+(n?r+Math.abs(f-e).toFixed(n).slice(2):"")};var AppCtrlBox=function(){function n(n){$("#street").html(n.Street+", NÂº: "+n.Number);$("#postCode").html(n.CEP);$("#postCodeLI").text(n.CEP);$("#city").html(n.City);$("#District").html(n.District);$("#state").html(n.Estate);$("#reference").html(n.Reference);$("#modalAddress").modal("show")}function t(t){$.ajax({url:"/../../Address/GetAjaxHandlerAddressByID",type:"Get",dataType:"json",data:{addressID:t},success:function(t){t.success?n(t.aaData):alert("Address not found!")},error:handleAjaxError})}function i(n){$.ajax({url:"Delivery/PostAjaxHanblerFinishDelivery",type:"POST",dataType:"json",data:{orderID:n},success:function(n){n.success&&(alert("Completo"),window.location.reload(!0))},error:handleAjaxError})}return{callModalAddress:function(n){t(n)},callModalFinalizeDelivery:function(n){$("#btnCloseDelivery").val(n);$.ajax({url:"Delivery/GetTableAjaxHandlerResumeDelivery",type:"GET",dataType:"json",data:{deliveryID:n},success:function(n){n.success&&($("#totalSale").html('<i class="icon-money"><\/i> Total value sale: '+n.aaData.TotalSale.formatMoney()),$("#totalProduct").html('<i class="icon-list"><\/i> Total Products Items: '+n.aaData.TotalProducts),$("#startDate").html("Start delivery: "+n.aaData.StartDate))},error:handleAjaxError});$("#modalFinalizeDelivery").modal("show")},putFinalizeDelivery:function(n){var t=$(n).val();i(t)}}}(),CreateStockMovements=function(){return{init:function(){jQuery(document).ready(function(){$(".select2_option").select2({allowClear:!0})})}}}(),ddlProduct="#ddlProduct",ddlTrackingType="#ddlTrackingType",ddlClient="#ddlClient",txtQuantity="#txtQuantity",CreateStock=function(){return{init:function(){jQuery(document).ready(function(){$(".select2_option").select2({allowClear:!0})})}}}(),StocksTable=function(){function t(){i()}function i(){n=$("#tbStocks").dataTable({sAjaxSource:"../Product/GetAjaxHandlerStocks",bProcessing:!0,bDestroy:!0,aoColumns:[{mData:"Client.Name",bSortable:!1},{mData:null,sType:"html",bSortable:!0,mRender:function(n,t){return t==="display"?n.PictureID===""||n.PictureID===null?'<img style="width:25px; height: 25px;" src="/../img/avatar.png" />  '+n.Name:'<img style="max-width:25px; max-height: 25px;" src="'+n.Product.Picture.SrcBase64Image+'" />  '+n.Product.Name:t==="filter"||t==="sort"?n.Product.Name:n}},{mData:"Minimum",bSortable:!1},{mData:"TotalStock"},{mData:"DefaultPrice",bSortable:!1},{mData:null,sType:"html",bSortable:!1,mRender:function(n,t){return t==="display"?'<a href="../Product/StocksMovements?stockID='+n.DT_RowId+'" class="edit"><i class="icon-edit"><\/i> Stock Movements<\/a>':n}}]})}var n;return{init:function(){t()},readOnly:function(){$("#tbBoxesType").dataTable()}}}(),_stockID,StockMovementsTable=function(){function t(){i()}function i(){n=$("#tbStockMovements").dataTable({fnServerParams:function(n){n.push({name:"stockID",value:_stockID})},sAjaxSource:"../Product/GetAjaxHandlerStocksMovements",bProcessing:!0,bDestroy:!0,aoColumns:[{mData:null,sType:"html",bSortable:!0,mRender:function(n,t){return t==="display"?n.Stock.Product.Picture===""||n.Stock.Product.Picture===null?'<img style="width:25px; height: 25px;" src="/../img/avatar.png" />  '+n.Stock.Product.Name:'<img style="max-width:25px; max-height: 25px;" src="'+n.Stock.Product.Picture.SrcBase64Image+'" />  '+n.Stock.Product.Name:t==="filter"||t==="sort"?n.Stock.Product.Name:n}},{mData:"ClientSupplier.Name"},{mData:"UnitPrice",bSortable:!1},{mData:"TotalValue"},{mData:"Amount",bSortable:!1},{mData:"FlowStepStock"},{defaultContent:"<i>Efetivar<\/i>"}]})}var n;return{init:function(n){_stockID=n;t()}}}();